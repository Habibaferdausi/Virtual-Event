(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{4905:function(e,t,s){Promise.resolve().then(s.bind(s,4959))},7907:function(e,t,s){"use strict";var n=s(5313);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})},9843:function(e,t,s){"use strict";s.d(t,{db:function(){return u}});var n=s(6142),a=s(8121);let r=(0,n.ZF)({apiKey:"AIzaSyB3WKjNyCQ0l35PB3gmCO4RMlw6XN4smjM",authDomain:"virtual-event-space-27375.firebaseapp.com",projectId:"virtual-event-space-27375",storageBucket:"virtual-event-space-27375.appspot.com",messagingSenderId:"1098716865490",appId:"1:1098716865490:web:cc67e0d2b2ed9fc8315e0b",measurementId:"G-CZBZYEG4TX"}),u=(0,a.ad)(r)},4959:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(3827),a=s(4090),r=s(8121),u=s(9843),o=s(7907),c=s(222),i=()=>{let{user:e}=(0,a.useContext)(c.AuthContext),[t,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(""),{id:d}=(0,o.useParams)();async function m(){try{if(!e)throw Error("User not authenticated");await (0,r.ET)((0,r.hJ)(u.db,"rooms/".concat(d,"/messages")),{content:i,username:e.displayName,userId:e.uid,timestamp:new Date}),console.log("Message sent successfully!"),l("")}catch(e){console.error("Error sending message: ",e),alert("Error sending message: "+e.message)}}return(0,a.useEffect)(()=>{if(!d)return;let e=(0,r.hJ)(u.db,"rooms/".concat(d,"/messages")),t=(0,r.IO)(e,(0,r.Xo)("timestamp")),n=(0,r.cf)(t,e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>n()},[d]),(0,n.jsxs)("div",{className:"room-chat max-w-2xl mx-auto",children:[(0,n.jsxs)("div",{className:"message-list mt-3 lg:mt-7 mb-3",children:[(0,n.jsx)("h1",{className:"my-3 text-lg lg:text-xl font-semibold text-center text-blue-500",children:"Room Messages"}),t.map(e=>(0,n.jsx)("div",{className:"message",children:(0,n.jsxs)("p",{children:[(0,n.jsxs)("strong",{children:[e.username,":"]})," ",e.content]})},e.id))]}),(0,n.jsxs)("div",{className:"message-input mt-4",children:[(0,n.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"Type your message..."}),(0,n.jsx)("button",{className:"bg-blue-500 text-white rounded p-2",onClick:m,children:"Send"})]})]})},l=()=>{let{user:e}=(0,a.useContext)(c.AuthContext),t=(0,o.useRouter)();return((0,a.useEffect)(()=>{e||t.push("/login")},[e,t]),e)?(0,n.jsx)("div",{children:(0,n.jsx)(i,{})}):null}},222:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthContext:function(){return o}});var n=s(3827),a=s(4090),r=s(2730),u=s(9843);let o=(0,a.createContext)(void 0),c=(0,r.v0)(u.default);t.default=e=>{let{children:t}=e,s=new r.hJ,[u,i]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0),[m,g]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=(0,r.Aj)(c,e=>{i(e),d(!1),g(!0)});return()=>{e()}},[]),(0,n.jsx)(o.Provider,{value:{user:u,signIn:(e,t)=>(0,r.e5)(c,e,t),updateUser:(e,t,s)=>(0,r.ck)(e,{displayName:t,photoURL:s}),logOut:()=>(0,r.w7)(c),loading:l||!m,createUser:(e,t)=>(0,r.Xb)(c,e,t),googleLogin:()=>(0,r.rh)(c,s)},children:t})}}},function(e){e.O(0,[358,380,456,839,971,69,744],function(){return e(e.s=4905)}),_N_E=e.O()}]);